---
id: integrate-with-your-cicd
title: "Integrate with CI/CD Platforms"
sidebar_label: "Integrate with CI/CD"
description: "Using the API Fortress API or CLI you can easily and seamlessly integrate continuous API testing powered by API Fortress into your CI/CD pipeline."
---

import useBaseUrl from '@docusaurus/useBaseUrl';

## Requirements
* [Docker](https://docs.docker.com/get-docker/)
* [Sauce Labs account `username` and `access_key`](https://app.saucelabs.com/user-settings)

## APIF-CTL

The API Fortress Mark3 cloud CLI tool (`apifctl`) allows you to execute tests and interact with API Fortress either locally, or in a pipeline by using the following docker image: [quay.io/saucelabs/apifctl](https://quay.io/repository/saucelabs/apifctl?tag=latest&tab=tags).

To use most of the tool's functionalities, a webhook is required for the project (just like with the old CLI tool: [apif-auto](/api-testing/mark2/ci/apif-auto)). You can either create or retrieve a webhook from the dashboard. Visit the [webhooks section](#generating-a-webhook) for further details.

The webhooks are organized in the following manner:
* `username`: your Sauce Labs user name
* `access_key`: your Sauce Labs access key
* `hookId`: generated by API Fortress Mark3 cloud

  ```bash
  https://<username>:<access_key>@domain/api-testing/rest/v4/<hookId>
  ```

To run the CLI tool:

  ```bash
  docker run quay.io/saucelabs/apifctl
  ```

### Generating a Webhook

To create a webhook:

1. Navigate to the project window and select the **WebHooks** tab.
   <img src={useBaseUrl('img/api-fortress/2021/04/webHooksSection.png')} alt="webhook screenshot"/>

1. Select **Create Hook**.
   <img src={useBaseUrl('img/api-fortress/2021/04/createHook.png')} alt="Create New WebHook"/>

1. Enter the field details and select **Save**.
   <img src={useBaseUrl('img/api-fortress/2021/04/sampleHook.png')} alt="sample webhook details"/>

1. A generated Hook URL will appear. Copy it to your clipboard and use it either locally or as part of CI build (the URL also appears in the [user settings](https://app.saucelabs.com/user-settings) section).
   <img src={useBaseUrl('img/api-fortress/2021/04/hookURL.png')} alt="sample Hook URL"/>

## Commands

### `run`

__Description__: Runs a single test. Both `hookId` and `testId` are required. The `testId` is typically located in the URL when viewing the test through the API Testing UI, e.g. `/api-testing/project/<projectId>/test/<testId>/`.<br/>
__Example__:
```bash
docker run quay.io/saucelabs/apifctl run -H \
https://<username>:<accessKey>@api.us-west-1.saucelabs.com/api-testing/rest/v4/<hookId> \
-i <testId>
```
---

### `run-all`

__Description__: Runs all the complete tests in the project referenced by the hook.<br/>
__Example__:
```bash
docker run quay.io/saucelabs/apifctl run-all -H \
https://<username>:<accessKey>@api.us-west-1.saucelabs.com/api-testing/rest/v4/<hookId>
```
---

### `run-tag`

__Description__: Runs all the tests tagged with a specific tag.<br/>
__Example__:
```bash
docker run quay.io/saucelabs/apifctl run-tag -H \
https://<username>:<accessKey>@api.us-west-1.saucelabs.com/api-testing/rest/v4/<hookId> \
-tag production
```
---

### `exec`

__Description__: Sends a test residing in the local file system (directory with `unit.xml` and `input.xml`) to the cloud for execution.<br/>
__Example__:
```bash
docker run -v $(pwd)/tests:/tests quay.io/saucelabs/apifctl exec -H \
https://<username>:<accessKey>@api.us-west-1.saucelabs.com/api-testing/rest/v4/<hookId> \
-p /tests/test_abc
```
---

### `upload`

__Description__: Uploads a test residing in the local file system  (directory with `unit.xml` and `input.xml`) to the cloud for storage.<br/>
__Example__:
```bash
docker run -v $(pwd)/tests:/tests quay.io/saucelabs/apifctl upload -H \
https://<username>:<accessKey>@api.us-west-1.saucelabs.com/api-testing/rest/v4/<hookId> \
-p /tests/test_abc
```
---

## Command Options

### `-E`

__Description__: Sets environment variables with your command.<br/>
__Example__:

```bash
-E domain=staging.com,id=123
```

---

### `-f`

__Description__: Sets the data format: `json` || `junit`.<br/>
__Example__:
```bash
-f junit
```
---

### `-t`

__Description__: Adds a set of tags to the resulting event.<br/>
__Example__:
```bash
-t production,smoketest
```
---
